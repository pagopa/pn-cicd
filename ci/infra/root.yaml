AWSTemplateFormatVersion: "2010-09-09"
Description: >
  Genera il repository maven e include gli stack di generazione dei CodeBuild project per 
  effettuare il build di librerie, microservizi e webapp.

Parameters:
  PnCiCdTemplatesBucketName:
    Type: String
    Description: Bucket name where pipeline copied the current version of CI templates
  CodeArtifactDomainName:
    Type: String
    Default: pn-codeartifact-domain
  CodeArtifactRepositoryName:
    Type: String
    Default: pn-codeartifact-repo
  NotificationSNSTopic:
    Type: String
    Default: "none"
    Description: Topic for build and pipeline notification

  Ada1:
    Type: Number
    Description: Account number allowed to read the artifacts
  Ada2:
    Type: Number
    Description: Account number allowed to read the artifacts
  Ada3:
    Type: Number
    Description: Account number allowed to read the artifacts
  Ada4:
    Type: Number
    Description: Account number allowed to read the artifacts
  Ada5:
    Type: Number
    Description: Account number allowed to read the artifacts
  Ada6:
    Type: Number
    Description: Account number allowed to read the artifacts
  Ada7:
    Type: Number
    Description: Account number allowed to read the artifacts
  Ada8:
    Type: Number
    Description: Account number allowed to read the artifacts
  Ada9:
    Type: Number
    Description: Account number allowed to read the artifacts
  Ada10:
    Type: Number
    Description: Account number allowed to read the artifacts
  Ada11:
    Type: Number
    Description: Account number allowed to read the artifacts
  Ada12:
    Type: Number
    Description: Account number allowed to read the artifacts
  Ada13:
    Type: Number
    Description: Account number allowed to read the artifacts
  Ada14:
    Type: Number
    Description: Account number allowed to read the artifacts
  Ada15:
    Type: Number
    Description: Account number allowed to read the artifacts
  Ada16:
    Type: Number
    Description: Account number allowed to read the artifacts
  Ada17:
    Type: Number
    Description: Account number allowed to read the artifacts
  Ada18:
    Type: Number
    Description: Account number allowed to read the artifacts
  Ada19:
    Type: Number
    Description: Account number allowed to read the artifacts
  Ada20:
    Type: Number
    Description: Account number allowed to read the artifacts
  Ada21:
    Type: Number
    Description: Account number allowed to read the artifacts
  Ada22:
    Type: Number
    Description: Account number allowed to read the artifacts
  Ada23:
    Type: Number
    Description: Account number allowed to read the artifacts
  Ada24:
    Type: Number
    Description: Account number allowed to read the artifacts
  Ada25:
    Type: Number
    Description: Account number allowed to read the artifacts
  Ada26:
    Type: Number
    Description: Account number allowed to read the artifacts
  Ada27:
    Type: Number
    Description: Account number allowed to read the artifacts
  Ada28:
    Type: Number
    Description: Account number allowed to read the artifacts
  Ada29:
    Type: Number
    Description: Account number allowed to read the artifacts
  Ada30:
    Type: Number
    Description: Account number allowed to read the artifacts

Resources:
  CodeArtifactStack:
    Type: AWS::CloudFormation::Stack
    Properties:
      TemplateURL: !Sub "https://s3.amazonaws.com/${PnCiCdTemplatesBucketName}/ci/infra/code-artifact.yaml"
      Parameters:
        CodeArtifactDomainName: !Ref "CodeArtifactDomainName"
        CodeArtifactRepositoryName: !Ref "CodeArtifactRepositoryName"
      TimeoutInMinutes: 5

  CiArtifactBucket:
    Type: AWS::S3::Bucket
    DeletionPolicy: Retain
    UpdateReplacePolicy: Retain
    Properties:
      VersioningConfiguration:
        Status: Enabled

  CiEventBus:
    Type: AWS::Events::EventBus
    Properties:
      Name: "CiEventBus"

  S3BucketPolicy:
    Type: AWS::S3::BucketPolicy
    Properties:
      Bucket: !Ref CiArtifactBucket
      PolicyDocument:
        Statement:
          - Action:
              - s3:Get*
              - s3:List*
            Effect: Allow
            Resource:
              - !Sub arn:aws:s3:::${CiArtifactBucket}
              - !Sub arn:aws:s3:::${CiArtifactBucket}/*
            Principal:
              AWS:
                - !Sub arn:aws:iam::${Ada1}:root
                - !Sub arn:aws:iam::${Ada2}:root
                - !Sub arn:aws:iam::${Ada3}:root
                - !Sub arn:aws:iam::${Ada4}:root
                - !Sub arn:aws:iam::${Ada5}:root
                - !Sub arn:aws:iam::${Ada6}:root
                - !Sub arn:aws:iam::${Ada7}:root
                - !Sub arn:aws:iam::${Ada8}:root
                - !Sub arn:aws:iam::${Ada9}:root
                - !Sub arn:aws:iam::${Ada10}:root
                - !Sub arn:aws:iam::${Ada11}:root
                - !Sub arn:aws:iam::${Ada12}:root
                - !Sub arn:aws:iam::${Ada13}:root
                - !Sub arn:aws:iam::${Ada14}:root
                - !Sub arn:aws:iam::${Ada15}:root
                - !Sub arn:aws:iam::${Ada16}:root
                - !Sub arn:aws:iam::${Ada17}:root
                - !Sub arn:aws:iam::${Ada18}:root
                - !Sub arn:aws:iam::${Ada19}:root
                - !Sub arn:aws:iam::${Ada20}:root
                - !Sub arn:aws:iam::${Ada21}:root
                - !Sub arn:aws:iam::${Ada22}:root
                - !Sub arn:aws:iam::${Ada23}:root
                - !Sub arn:aws:iam::${Ada24}:root
                - !Sub arn:aws:iam::${Ada25}:root
                - !Sub arn:aws:iam::${Ada26}:root
                - !Sub arn:aws:iam::${Ada27}:root
                - !Sub arn:aws:iam::${Ada28}:root
                - !Sub arn:aws:iam::${Ada29}:root
                - !Sub arn:aws:iam::${Ada30}:root

  # Progetti CI jar
  ParentPomCI:
    Type: AWS::CloudFormation::Stack
    Properties:
      TemplateURL: !Sub "https://s3.amazonaws.com/${PnCiCdTemplatesBucketName}/ci/builders/mvn-jar-codebuild.yaml"
      Parameters:
        GitHubProjectName: "pn-parent"
        GitHubDefaultBranch: "develop"
        CodeArtifactDomainName: !Ref "CodeArtifactDomainName"
        CodeArtifactRepositoryName: !Ref "CodeArtifactRepositoryName"
        NotificationSNSTopic: !Ref "NotificationSNSTopic"
      TimeoutInMinutes: 5
  PnModelCI:
    Type: AWS::CloudFormation::Stack
    Properties:
      TemplateURL: !Sub "https://s3.amazonaws.com/${PnCiCdTemplatesBucketName}/ci/builders/mvn-jar-codebuild.yaml"
      Parameters:
        GitHubProjectName: "pn-model"
        GitHubDefaultBranch: "develop"
        CodeArtifactDomainName: !Ref "CodeArtifactDomainName"
        CodeArtifactRepositoryName: !Ref "CodeArtifactRepositoryName"
        NotificationSNSTopic: !Ref "NotificationSNSTopic"
      TimeoutInMinutes: 5
  PnCommonsCI:
    Type: AWS::CloudFormation::Stack
    Properties:
      TemplateURL: !Sub "https://s3.amazonaws.com/${PnCiCdTemplatesBucketName}/ci/builders/mvn-jar-codebuild.yaml"
      Parameters:
        GitHubProjectName: "pn-commons"
        GitHubDefaultBranch: "develop"
        CodeArtifactDomainName: !Ref "CodeArtifactDomainName"
        CodeArtifactRepositoryName: !Ref "CodeArtifactRepositoryName"
        NotificationSNSTopic: !Ref "NotificationSNSTopic"
      TimeoutInMinutes: 5
  PnF24LibCI:
    Type: AWS::CloudFormation::Stack
    Properties:
      TemplateURL: !Sub "https://s3.amazonaws.com/${PnCiCdTemplatesBucketName}/ci/builders/mvn-jar-codebuild.yaml"
      Parameters:
        GitHubProjectName: "pn-f24lib"
        GitHubDefaultBranch: "develop"
        CodeArtifactDomainName: !Ref "CodeArtifactDomainName"
        CodeArtifactRepositoryName: !Ref "CodeArtifactRepositoryName"
        NotificationSNSTopic: !Ref "NotificationSNSTopic"
      TimeoutInMinutes: 5
  # Progetti docker
  PnDeliveryCI:
    Type: AWS::CloudFormation::Stack
    Properties:
      TemplateURL: !Sub "https://s3.amazonaws.com/${PnCiCdTemplatesBucketName}/ci/builders/mvn-docker-codebuild.yaml"
      Parameters:
        GitHubProjectName: "pn-delivery"
        DisableIntegrationTest: "false"
        CodeArtifactDomainName: !Ref "CodeArtifactDomainName"
        CodeArtifactRepositoryName: !Ref "CodeArtifactRepositoryName"
        GitHubDefaultBranch: "develop"
        NotificationSNSTopic: !Ref "NotificationSNSTopic"
        CiArtifactBucket: !Ref "CiArtifactBucket"
        AllowedDeployAccount1: !Ref Ada1
        AllowedDeployAccount2: !Ref Ada2
        AllowedDeployAccount3: !Ref Ada3
        AllowedDeployAccount4: !Ref Ada4
        AllowedDeployAccount5: !Ref Ada5
        AllowedDeployAccount6: !Ref Ada6
        AllowedDeployAccount7: !Ref Ada7
        AllowedDeployAccount8: !Ref Ada8
        AllowedDeployAccount9: !Ref Ada9
        AllowedDeployAccount10: !Ref Ada10
        AllowedDeployAccount11: !Ref Ada11
        AllowedDeployAccount12: !Ref Ada12
        AllowedDeployAccount13: !Ref Ada13
        AllowedDeployAccount14: !Ref Ada14
        AllowedDeployAccount15: !Ref Ada15
        AllowedDeployAccount16: !Ref Ada16
        AllowedDeployAccount17: !Ref Ada17
        AllowedDeployAccount18: !Ref Ada18
        AllowedDeployAccount19: !Ref Ada19
        AllowedDeployAccount20: !Ref Ada20
        AllowedDeployAccount21: !Ref Ada21
        AllowedDeployAccount22: !Ref Ada22
        AllowedDeployAccount23: !Ref Ada23
        AllowedDeployAccount24: !Ref Ada24
        AllowedDeployAccount25: !Ref Ada25
        AllowedDeployAccount26: !Ref Ada26
        AllowedDeployAccount27: !Ref Ada27
        AllowedDeployAccount28: !Ref Ada28
        AllowedDeployAccount29: !Ref Ada29
        AllowedDeployAccount30: !Ref Ada30
      TimeoutInMinutes: 5
  PnDeliveryPushCI:
    Type: AWS::CloudFormation::Stack
    Properties:
      TemplateURL: !Sub "https://s3.amazonaws.com/${PnCiCdTemplatesBucketName}/ci/builders/mvn-docker-codebuild.yaml"
      Parameters:
        GitHubProjectName: "pn-delivery-push"
        DisableIntegrationTest: "false"
        GitHubDefaultBranch: "develop"
        CodeArtifactDomainName: !Ref "CodeArtifactDomainName"
        CodeArtifactRepositoryName: !Ref "CodeArtifactRepositoryName"
        NotificationSNSTopic: !Ref "NotificationSNSTopic"
        CiArtifactBucket: !Ref "CiArtifactBucket"
        AllowedDeployAccount1: !Ref Ada1
        AllowedDeployAccount2: !Ref Ada2
        AllowedDeployAccount3: !Ref Ada3
        AllowedDeployAccount4: !Ref Ada4
        AllowedDeployAccount5: !Ref Ada5
        AllowedDeployAccount6: !Ref Ada6
        AllowedDeployAccount7: !Ref Ada7
        AllowedDeployAccount8: !Ref Ada8
        AllowedDeployAccount9: !Ref Ada9
        AllowedDeployAccount10: !Ref Ada10
        AllowedDeployAccount11: !Ref Ada11
        AllowedDeployAccount12: !Ref Ada12
        AllowedDeployAccount13: !Ref Ada13
        AllowedDeployAccount14: !Ref Ada14
        AllowedDeployAccount15: !Ref Ada15
        AllowedDeployAccount16: !Ref Ada16
        AllowedDeployAccount17: !Ref Ada17
        AllowedDeployAccount18: !Ref Ada18
        AllowedDeployAccount19: !Ref Ada19
        AllowedDeployAccount20: !Ref Ada20
        AllowedDeployAccount21: !Ref Ada21
        AllowedDeployAccount22: !Ref Ada22
        AllowedDeployAccount23: !Ref Ada23
        AllowedDeployAccount24: !Ref Ada24
        AllowedDeployAccount25: !Ref Ada25
        AllowedDeployAccount26: !Ref Ada26
        AllowedDeployAccount27: !Ref Ada27
        AllowedDeployAccount28: !Ref Ada28
        AllowedDeployAccount29: !Ref Ada29
        AllowedDeployAccount30: !Ref Ada30
      TimeoutInMinutes: 20
  PnExternalChannelsCI:
    Type: AWS::CloudFormation::Stack
    Properties:
      TemplateURL: !Sub "https://s3.amazonaws.com/${PnCiCdTemplatesBucketName}/ci/builders/mvn-docker-codebuild.yaml"
      Parameters:
        GitHubProjectName: "pn-external-channels"
        GitHubDefaultBranch: "develop"
        CodeArtifactDomainName: !Ref "CodeArtifactDomainName"
        CodeArtifactRepositoryName: !Ref "CodeArtifactRepositoryName"
        NotificationSNSTopic: !Ref "NotificationSNSTopic"
        CiArtifactBucket: !Ref "CiArtifactBucket"
        AllowedDeployAccount1: !Ref Ada1
        AllowedDeployAccount2: !Ref Ada2
        AllowedDeployAccount3: !Ref Ada3
        AllowedDeployAccount4: !Ref Ada4
        AllowedDeployAccount5: !Ref Ada5
        AllowedDeployAccount6: !Ref Ada6
        AllowedDeployAccount7: !Ref Ada7
        AllowedDeployAccount8: !Ref Ada8
        AllowedDeployAccount9: !Ref Ada9
        AllowedDeployAccount10: !Ref Ada10
        AllowedDeployAccount11: !Ref Ada11
        AllowedDeployAccount12: !Ref Ada12
        AllowedDeployAccount13: !Ref Ada13
        AllowedDeployAccount14: !Ref Ada14
        AllowedDeployAccount15: !Ref Ada15
        AllowedDeployAccount16: !Ref Ada16
        AllowedDeployAccount17: !Ref Ada17
        AllowedDeployAccount18: !Ref Ada18
        AllowedDeployAccount19: !Ref Ada19
        AllowedDeployAccount20: !Ref Ada20
        AllowedDeployAccount21: !Ref Ada21
        AllowedDeployAccount22: !Ref Ada22
        AllowedDeployAccount23: !Ref Ada23
        AllowedDeployAccount24: !Ref Ada24
        AllowedDeployAccount25: !Ref Ada25
        AllowedDeployAccount26: !Ref Ada26
        AllowedDeployAccount27: !Ref Ada27
        AllowedDeployAccount28: !Ref Ada28
        AllowedDeployAccount29: !Ref Ada29
        AllowedDeployAccount30: !Ref Ada30
      TimeoutInMinutes: 5
  PnDataVaultCI:
    Type: AWS::CloudFormation::Stack
    Properties:
      TemplateURL: !Sub "https://s3.amazonaws.com/${PnCiCdTemplatesBucketName}/ci/builders/mvn-docker-codebuild.yaml"
      Parameters:
        GitHubProjectName: "pn-data-vault"
        GitHubDefaultBranch: "develop"
        DisableIntegrationTest: "false"
        CodeArtifactDomainName: !Ref "CodeArtifactDomainName"
        CodeArtifactRepositoryName: !Ref "CodeArtifactRepositoryName"
        NotificationSNSTopic: !Ref "NotificationSNSTopic"
        CiArtifactBucket: !Ref "CiArtifactBucket"
        AllowedDeployAccount1: !Ref Ada1
        AllowedDeployAccount2: !Ref Ada2
        AllowedDeployAccount3: !Ref Ada3
        AllowedDeployAccount4: !Ref Ada4
        AllowedDeployAccount5: !Ref Ada5
        AllowedDeployAccount6: !Ref Ada6
        AllowedDeployAccount7: !Ref Ada7
        AllowedDeployAccount8: !Ref Ada8
        AllowedDeployAccount9: !Ref Ada9
        AllowedDeployAccount10: !Ref Ada10
        AllowedDeployAccount11: !Ref Ada11
        AllowedDeployAccount12: !Ref Ada12
        AllowedDeployAccount13: !Ref Ada13
        AllowedDeployAccount14: !Ref Ada14
        AllowedDeployAccount15: !Ref Ada15
        AllowedDeployAccount16: !Ref Ada16
        AllowedDeployAccount17: !Ref Ada17
        AllowedDeployAccount18: !Ref Ada18
        AllowedDeployAccount19: !Ref Ada19
        AllowedDeployAccount20: !Ref Ada20
        AllowedDeployAccount21: !Ref Ada21
        AllowedDeployAccount22: !Ref Ada22
        AllowedDeployAccount23: !Ref Ada23
        AllowedDeployAccount24: !Ref Ada24
        AllowedDeployAccount25: !Ref Ada25
        AllowedDeployAccount26: !Ref Ada26
        AllowedDeployAccount27: !Ref Ada27
        AllowedDeployAccount28: !Ref Ada28
        AllowedDeployAccount29: !Ref Ada29
        AllowedDeployAccount30: !Ref Ada30
      TimeoutInMinutes: 5
  PnNationalRegistriesCI:
    Type: AWS::CloudFormation::Stack
    Properties:
      TemplateURL: !Sub "https://s3.amazonaws.com/${PnCiCdTemplatesBucketName}/ci/builders/mvn-docker-codebuild.yaml"
      Parameters:
        GitHubProjectName: "pn-national-registries"
        GitHubDefaultBranch: "develop"
        CodeArtifactDomainName: !Ref "CodeArtifactDomainName"
        CodeArtifactRepositoryName: !Ref "CodeArtifactRepositoryName"
        NotificationSNSTopic: !Ref "NotificationSNSTopic"
        CiArtifactBucket: !Ref "CiArtifactBucket"
        AllowedDeployAccount1: !Ref Ada1
        AllowedDeployAccount2: !Ref Ada2
        AllowedDeployAccount3: !Ref Ada3
        AllowedDeployAccount4: !Ref Ada4
        AllowedDeployAccount5: !Ref Ada5
        AllowedDeployAccount6: !Ref Ada6
        AllowedDeployAccount7: !Ref Ada7
        AllowedDeployAccount8: !Ref Ada8
        AllowedDeployAccount9: !Ref Ada9
        AllowedDeployAccount10: !Ref Ada10
        AllowedDeployAccount11: !Ref Ada11
        AllowedDeployAccount12: !Ref Ada12
        AllowedDeployAccount13: !Ref Ada13
        AllowedDeployAccount14: !Ref Ada14
        AllowedDeployAccount15: !Ref Ada15
        AllowedDeployAccount16: !Ref Ada16
        AllowedDeployAccount17: !Ref Ada17
        AllowedDeployAccount18: !Ref Ada18
        AllowedDeployAccount19: !Ref Ada19
        AllowedDeployAccount20: !Ref Ada20
        AllowedDeployAccount21: !Ref Ada21
        AllowedDeployAccount22: !Ref Ada22
        AllowedDeployAccount23: !Ref Ada23
        AllowedDeployAccount24: !Ref Ada24
        AllowedDeployAccount25: !Ref Ada25
        AllowedDeployAccount26: !Ref Ada26
        AllowedDeployAccount27: !Ref Ada27
        AllowedDeployAccount28: !Ref Ada28
        AllowedDeployAccount29: !Ref Ada29
        AllowedDeployAccount30: !Ref Ada30
      TimeoutInMinutes: 5
  PnExternalRegistriesCI:
    Type: AWS::CloudFormation::Stack
    Properties:
      TemplateURL: !Sub "https://s3.amazonaws.com/${PnCiCdTemplatesBucketName}/ci/builders/mvn-docker-codebuild.yaml"
      Parameters:
        GitHubProjectName: "pn-external-registries"
        GitHubDefaultBranch: "develop"
        DisableIntegrationTest: "false"
        CodeArtifactDomainName: !Ref "CodeArtifactDomainName"
        CodeArtifactRepositoryName: !Ref "CodeArtifactRepositoryName"
        NotificationSNSTopic: !Ref "NotificationSNSTopic"
        CiArtifactBucket: !Ref "CiArtifactBucket"
        AllowedDeployAccount1: !Ref Ada1
        AllowedDeployAccount2: !Ref Ada2
        AllowedDeployAccount3: !Ref Ada3
        AllowedDeployAccount4: !Ref Ada4
        AllowedDeployAccount5: !Ref Ada5
        AllowedDeployAccount6: !Ref Ada6
        AllowedDeployAccount7: !Ref Ada7
        AllowedDeployAccount8: !Ref Ada8
        AllowedDeployAccount9: !Ref Ada9
        AllowedDeployAccount10: !Ref Ada10
        AllowedDeployAccount11: !Ref Ada11
        AllowedDeployAccount12: !Ref Ada12
        AllowedDeployAccount13: !Ref Ada13
        AllowedDeployAccount14: !Ref Ada14
        AllowedDeployAccount15: !Ref Ada15
        AllowedDeployAccount16: !Ref Ada16
        AllowedDeployAccount17: !Ref Ada17
        AllowedDeployAccount18: !Ref Ada18
        AllowedDeployAccount19: !Ref Ada19
        AllowedDeployAccount20: !Ref Ada20
        AllowedDeployAccount21: !Ref Ada21
        AllowedDeployAccount22: !Ref Ada22
        AllowedDeployAccount23: !Ref Ada23
        AllowedDeployAccount24: !Ref Ada24
        AllowedDeployAccount25: !Ref Ada25
        AllowedDeployAccount26: !Ref Ada26
        AllowedDeployAccount27: !Ref Ada27
        AllowedDeployAccount28: !Ref Ada28
        AllowedDeployAccount29: !Ref Ada29
        AllowedDeployAccount30: !Ref Ada30
      TimeoutInMinutes: 5
  PnMandateCI:
    Type: AWS::CloudFormation::Stack
    Properties:
      TemplateURL: !Sub "https://s3.amazonaws.com/${PnCiCdTemplatesBucketName}/ci/builders/mvn-docker-codebuild.yaml"
      Parameters:
        GitHubProjectName: "pn-mandate"
        GitHubDefaultBranch: "develop"
        DisableIntegrationTest: "false"
        CodeArtifactDomainName: !Ref "CodeArtifactDomainName"
        CodeArtifactRepositoryName: !Ref "CodeArtifactRepositoryName"
        NotificationSNSTopic: !Ref "NotificationSNSTopic"
        CiArtifactBucket: !Ref "CiArtifactBucket"
        AllowedDeployAccount1: !Ref Ada1
        AllowedDeployAccount2: !Ref Ada2
        AllowedDeployAccount3: !Ref Ada3
        AllowedDeployAccount4: !Ref Ada4
        AllowedDeployAccount5: !Ref Ada5
        AllowedDeployAccount6: !Ref Ada6
        AllowedDeployAccount7: !Ref Ada7
        AllowedDeployAccount8: !Ref Ada8
        AllowedDeployAccount9: !Ref Ada9
        AllowedDeployAccount10: !Ref Ada10
        AllowedDeployAccount11: !Ref Ada11
        AllowedDeployAccount12: !Ref Ada12
        AllowedDeployAccount13: !Ref Ada13
        AllowedDeployAccount14: !Ref Ada14
        AllowedDeployAccount15: !Ref Ada15
        AllowedDeployAccount16: !Ref Ada16
        AllowedDeployAccount17: !Ref Ada17
        AllowedDeployAccount18: !Ref Ada18
        AllowedDeployAccount19: !Ref Ada19
        AllowedDeployAccount20: !Ref Ada20
        AllowedDeployAccount21: !Ref Ada21
        AllowedDeployAccount22: !Ref Ada22
        AllowedDeployAccount23: !Ref Ada23
        AllowedDeployAccount24: !Ref Ada24
        AllowedDeployAccount25: !Ref Ada25
        AllowedDeployAccount26: !Ref Ada26
        AllowedDeployAccount27: !Ref Ada27
        AllowedDeployAccount28: !Ref Ada28
        AllowedDeployAccount29: !Ref Ada29
        AllowedDeployAccount30: !Ref Ada30
      TimeoutInMinutes: 5
  PnUserAttributesCI:
    Type: AWS::CloudFormation::Stack
    Properties:
      TemplateURL: !Sub "https://s3.amazonaws.com/${PnCiCdTemplatesBucketName}/ci/builders/mvn-docker-codebuild.yaml"
      Parameters:
        GitHubProjectName: "pn-user-attributes"
        GitHubDefaultBranch: "develop"
        DisableIntegrationTest: "false"
        CodeArtifactDomainName: !Ref "CodeArtifactDomainName"
        CodeArtifactRepositoryName: !Ref "CodeArtifactRepositoryName"
        NotificationSNSTopic: !Ref "NotificationSNSTopic"
        CiArtifactBucket: !Ref "CiArtifactBucket"
        AllowedDeployAccount1: !Ref Ada1
        AllowedDeployAccount2: !Ref Ada2
        AllowedDeployAccount3: !Ref Ada3
        AllowedDeployAccount4: !Ref Ada4
        AllowedDeployAccount5: !Ref Ada5
        AllowedDeployAccount6: !Ref Ada6
        AllowedDeployAccount7: !Ref Ada7
        AllowedDeployAccount8: !Ref Ada8
        AllowedDeployAccount9: !Ref Ada9
        AllowedDeployAccount10: !Ref Ada10
        AllowedDeployAccount11: !Ref Ada11
        AllowedDeployAccount12: !Ref Ada12
        AllowedDeployAccount13: !Ref Ada13
        AllowedDeployAccount14: !Ref Ada14
        AllowedDeployAccount15: !Ref Ada15
        AllowedDeployAccount16: !Ref Ada16
        AllowedDeployAccount17: !Ref Ada17
        AllowedDeployAccount18: !Ref Ada18
        AllowedDeployAccount19: !Ref Ada19
        AllowedDeployAccount20: !Ref Ada20
        AllowedDeployAccount21: !Ref Ada21
        AllowedDeployAccount22: !Ref Ada22
        AllowedDeployAccount23: !Ref Ada23
        AllowedDeployAccount24: !Ref Ada24
        AllowedDeployAccount25: !Ref Ada25
        AllowedDeployAccount26: !Ref Ada26
        AllowedDeployAccount27: !Ref Ada27
        AllowedDeployAccount28: !Ref Ada28
        AllowedDeployAccount29: !Ref Ada29
        AllowedDeployAccount30: !Ref Ada30
      TimeoutInMinutes: 5
  PnDowntimeLogsCI:
    Type: AWS::CloudFormation::Stack
    Properties:
      TemplateURL: !Sub "https://s3.amazonaws.com/${PnCiCdTemplatesBucketName}/ci/builders/mvn-docker-codebuild.yaml"
      Parameters:
        GitHubProjectName: "pn-downtime-logs"
        GitHubDefaultBranch: "develop"
        CodeArtifactDomainName: !Ref "CodeArtifactDomainName"
        CodeArtifactRepositoryName: !Ref "CodeArtifactRepositoryName"
        NotificationSNSTopic: !Ref "NotificationSNSTopic"
        CiArtifactBucket: !Ref "CiArtifactBucket"
        AllowedDeployAccount1: !Ref Ada1
        AllowedDeployAccount2: !Ref Ada2
        AllowedDeployAccount3: !Ref Ada3
        AllowedDeployAccount4: !Ref Ada4
        AllowedDeployAccount5: !Ref Ada5
        AllowedDeployAccount6: !Ref Ada6
        AllowedDeployAccount7: !Ref Ada7
        AllowedDeployAccount8: !Ref Ada8
        AllowedDeployAccount9: !Ref Ada9
        AllowedDeployAccount10: !Ref Ada10
        AllowedDeployAccount11: !Ref Ada11
        AllowedDeployAccount12: !Ref Ada12
        AllowedDeployAccount13: !Ref Ada13
        AllowedDeployAccount14: !Ref Ada14
        AllowedDeployAccount15: !Ref Ada15
        AllowedDeployAccount16: !Ref Ada16
        AllowedDeployAccount17: !Ref Ada17
        AllowedDeployAccount18: !Ref Ada18
        AllowedDeployAccount19: !Ref Ada19
        AllowedDeployAccount20: !Ref Ada20
        AllowedDeployAccount21: !Ref Ada21
        AllowedDeployAccount22: !Ref Ada22
        AllowedDeployAccount23: !Ref Ada23
        AllowedDeployAccount24: !Ref Ada24
        AllowedDeployAccount25: !Ref Ada25
        AllowedDeployAccount26: !Ref Ada26
        AllowedDeployAccount27: !Ref Ada27
        AllowedDeployAccount28: !Ref Ada28
        AllowedDeployAccount29: !Ref Ada29
        AllowedDeployAccount30: !Ref Ada30
      TimeoutInMinutes: 5
  PnRaddFsuCI:
    Type: AWS::CloudFormation::Stack
    Properties:
      TemplateURL: !Sub "https://s3.amazonaws.com/${PnCiCdTemplatesBucketName}/ci/builders/mvn-docker-codebuild.yaml"
      Parameters:
        GitHubProjectName: "pn-radd-fsu"
        GitHubDefaultBranch: "develop"
        CodeArtifactDomainName: !Ref "CodeArtifactDomainName"
        CodeArtifactRepositoryName: !Ref "CodeArtifactRepositoryName"
        NotificationSNSTopic: !Ref "NotificationSNSTopic"
        CiArtifactBucket: !Ref "CiArtifactBucket"
        AllowedDeployAccount1: !Ref Ada1
        AllowedDeployAccount2: !Ref Ada2
        AllowedDeployAccount3: !Ref Ada3
        AllowedDeployAccount4: !Ref Ada4
        AllowedDeployAccount5: !Ref Ada5
        AllowedDeployAccount6: !Ref Ada6
        AllowedDeployAccount7: !Ref Ada7
        AllowedDeployAccount8: !Ref Ada8
        AllowedDeployAccount9: !Ref Ada9
        AllowedDeployAccount10: !Ref Ada10
        AllowedDeployAccount11: !Ref Ada11
        AllowedDeployAccount12: !Ref Ada12
        AllowedDeployAccount13: !Ref Ada13
        AllowedDeployAccount14: !Ref Ada14
        AllowedDeployAccount15: !Ref Ada15
        AllowedDeployAccount16: !Ref Ada16
        AllowedDeployAccount17: !Ref Ada17
        AllowedDeployAccount18: !Ref Ada18
        AllowedDeployAccount19: !Ref Ada19
        AllowedDeployAccount20: !Ref Ada20
        AllowedDeployAccount21: !Ref Ada21
        AllowedDeployAccount22: !Ref Ada22
        AllowedDeployAccount23: !Ref Ada23
        AllowedDeployAccount24: !Ref Ada24
        AllowedDeployAccount25: !Ref Ada25
        AllowedDeployAccount26: !Ref Ada26
        AllowedDeployAccount27: !Ref Ada27
        AllowedDeployAccount28: !Ref Ada28
        AllowedDeployAccount29: !Ref Ada29
        AllowedDeployAccount30: !Ref Ada30
      TimeoutInMinutes: 5
  PnLogExtractorBeCI:
    Type: AWS::CloudFormation::Stack
    Properties:
      TemplateURL: !Sub "https://s3.amazonaws.com/${PnCiCdTemplatesBucketName}/ci/builders/mvn-docker-codebuild.yaml"
      Parameters:
        GitHubProjectName: "pn-logextractor-be"
        GitHubDefaultBranch: "develop"
        CodeArtifactDomainName: !Ref "CodeArtifactDomainName"
        CodeArtifactRepositoryName: !Ref "CodeArtifactRepositoryName"
        NotificationSNSTopic: !Ref "NotificationSNSTopic"
        CiArtifactBucket: !Ref "CiArtifactBucket"
        AllowedDeployAccount1: !Ref Ada1
        AllowedDeployAccount2: !Ref Ada2
        AllowedDeployAccount3: !Ref Ada3
        AllowedDeployAccount4: !Ref Ada4
        AllowedDeployAccount5: !Ref Ada5
        AllowedDeployAccount6: !Ref Ada6
        AllowedDeployAccount7: !Ref Ada7
        AllowedDeployAccount8: !Ref Ada8
        AllowedDeployAccount9: !Ref Ada9
        AllowedDeployAccount10: !Ref Ada10
        AllowedDeployAccount11: !Ref Ada11
        AllowedDeployAccount12: !Ref Ada12
        AllowedDeployAccount13: !Ref Ada13
        AllowedDeployAccount14: !Ref Ada14
        AllowedDeployAccount15: !Ref Ada15
        AllowedDeployAccount16: !Ref Ada16
        AllowedDeployAccount17: !Ref Ada17
        AllowedDeployAccount18: !Ref Ada18
        AllowedDeployAccount19: !Ref Ada19
        AllowedDeployAccount20: !Ref Ada20
        AllowedDeployAccount21: !Ref Ada21
        AllowedDeployAccount22: !Ref Ada22
        AllowedDeployAccount23: !Ref Ada23
        AllowedDeployAccount24: !Ref Ada24
        AllowedDeployAccount25: !Ref Ada25
        AllowedDeployAccount26: !Ref Ada26
        AllowedDeployAccount27: !Ref Ada27
        AllowedDeployAccount28: !Ref Ada28
        AllowedDeployAccount29: !Ref Ada29
        AllowedDeployAccount30: !Ref Ada30
      TimeoutInMinutes: 5
  PnLogsaverBeCI:
    Type: AWS::CloudFormation::Stack
    Properties:
      TemplateURL: !Sub "https://s3.amazonaws.com/${PnCiCdTemplatesBucketName}/ci/builders/mvn-docker-codebuild.yaml"
      Parameters:
        GitHubProjectName: "pn-logsaver-be"
        GitHubDefaultBranch: "develop"
        CodeArtifactDomainName: !Ref "CodeArtifactDomainName"
        CodeArtifactRepositoryName: !Ref "CodeArtifactRepositoryName"
        NotificationSNSTopic: !Ref "NotificationSNSTopic"
        CiArtifactBucket: !Ref "CiArtifactBucket"
        AllowedDeployAccount1: !Ref Ada1
        AllowedDeployAccount2: !Ref Ada2
        AllowedDeployAccount3: !Ref Ada3
        AllowedDeployAccount4: !Ref Ada4
        AllowedDeployAccount5: !Ref Ada5
        AllowedDeployAccount6: !Ref Ada6
        AllowedDeployAccount7: !Ref Ada7
        AllowedDeployAccount8: !Ref Ada8
        AllowedDeployAccount9: !Ref Ada9
        AllowedDeployAccount10: !Ref Ada10
        AllowedDeployAccount11: !Ref Ada11
        AllowedDeployAccount12: !Ref Ada12
        AllowedDeployAccount13: !Ref Ada13
        AllowedDeployAccount14: !Ref Ada14
        AllowedDeployAccount15: !Ref Ada15
        AllowedDeployAccount16: !Ref Ada16
        AllowedDeployAccount17: !Ref Ada17
        AllowedDeployAccount18: !Ref Ada18
        AllowedDeployAccount19: !Ref Ada19
        AllowedDeployAccount20: !Ref Ada20
        AllowedDeployAccount21: !Ref Ada21
        AllowedDeployAccount22: !Ref Ada22
        AllowedDeployAccount23: !Ref Ada23
        AllowedDeployAccount24: !Ref Ada24
        AllowedDeployAccount25: !Ref Ada25
        AllowedDeployAccount26: !Ref Ada26
        AllowedDeployAccount27: !Ref Ada27
        AllowedDeployAccount28: !Ref Ada28
        AllowedDeployAccount29: !Ref Ada29
        AllowedDeployAccount30: !Ref Ada30
      TimeoutInMinutes: 5
  PnApikeyManagerCI:
    Type: AWS::CloudFormation::Stack
    Properties:
      TemplateURL: !Sub "https://s3.amazonaws.com/${PnCiCdTemplatesBucketName}/ci/builders/mvn-docker-codebuild.yaml"
      Parameters:
        GitHubProjectName: "pn-apikey-manager"
        GitHubDefaultBranch: "develop"
        CodeArtifactDomainName: !Ref "CodeArtifactDomainName"
        CodeArtifactRepositoryName: !Ref "CodeArtifactRepositoryName"
        NotificationSNSTopic: !Ref "NotificationSNSTopic"
        CiArtifactBucket: !Ref "CiArtifactBucket"
        AllowedDeployAccount1: !Ref Ada1
        AllowedDeployAccount2: !Ref Ada2
        AllowedDeployAccount3: !Ref Ada3
        AllowedDeployAccount4: !Ref Ada4
        AllowedDeployAccount5: !Ref Ada5
        AllowedDeployAccount6: !Ref Ada6
        AllowedDeployAccount7: !Ref Ada7
        AllowedDeployAccount8: !Ref Ada8
        AllowedDeployAccount9: !Ref Ada9
        AllowedDeployAccount10: !Ref Ada10
        AllowedDeployAccount11: !Ref Ada11
        AllowedDeployAccount12: !Ref Ada12
        AllowedDeployAccount13: !Ref Ada13
        AllowedDeployAccount14: !Ref Ada14
        AllowedDeployAccount15: !Ref Ada15
        AllowedDeployAccount16: !Ref Ada16
        AllowedDeployAccount17: !Ref Ada17
        AllowedDeployAccount18: !Ref Ada18
        AllowedDeployAccount19: !Ref Ada19
        AllowedDeployAccount20: !Ref Ada20
        AllowedDeployAccount21: !Ref Ada21
        AllowedDeployAccount22: !Ref Ada22
        AllowedDeployAccount23: !Ref Ada23
        AllowedDeployAccount24: !Ref Ada24
        AllowedDeployAccount25: !Ref Ada25
        AllowedDeployAccount26: !Ref Ada26
        AllowedDeployAccount27: !Ref Ada27
        AllowedDeployAccount28: !Ref Ada28
        AllowedDeployAccount29: !Ref Ada29
        AllowedDeployAccount30: !Ref Ada30
      TimeoutInMinutes: 5
  PnPaperChannelCI:
    Type: AWS::CloudFormation::Stack
    Properties:
      TemplateURL: !Sub "https://s3.amazonaws.com/${PnCiCdTemplatesBucketName}/ci/builders/mvn-docker-codebuild.yaml"
      Parameters:
        GitHubProjectName: "pn-paper-channel"
        GitHubDefaultBranch: "develop"
        DisableIntegrationTest: "false"
        CodeArtifactDomainName: !Ref "CodeArtifactDomainName"
        CodeArtifactRepositoryName: !Ref "CodeArtifactRepositoryName"
        NotificationSNSTopic: !Ref "NotificationSNSTopic"
        CiArtifactBucket: !Ref "CiArtifactBucket"
        AllowedDeployAccount1: !Ref Ada1
        AllowedDeployAccount2: !Ref Ada2
        AllowedDeployAccount3: !Ref Ada3
        AllowedDeployAccount4: !Ref Ada4
        AllowedDeployAccount5: !Ref Ada5
        AllowedDeployAccount6: !Ref Ada6
        AllowedDeployAccount7: !Ref Ada7
        AllowedDeployAccount8: !Ref Ada8
        AllowedDeployAccount9: !Ref Ada9
        AllowedDeployAccount10: !Ref Ada10
        AllowedDeployAccount11: !Ref Ada11
        AllowedDeployAccount12: !Ref Ada12
        AllowedDeployAccount13: !Ref Ada13
        AllowedDeployAccount14: !Ref Ada14
        AllowedDeployAccount15: !Ref Ada15
        AllowedDeployAccount16: !Ref Ada16
        AllowedDeployAccount17: !Ref Ada17
        AllowedDeployAccount18: !Ref Ada18
        AllowedDeployAccount19: !Ref Ada19
        AllowedDeployAccount20: !Ref Ada20
        AllowedDeployAccount21: !Ref Ada21
        AllowedDeployAccount22: !Ref Ada22
        AllowedDeployAccount23: !Ref Ada23
        AllowedDeployAccount24: !Ref Ada24
        AllowedDeployAccount25: !Ref Ada25
        AllowedDeployAccount26: !Ref Ada26
        AllowedDeployAccount27: !Ref Ada27
        AllowedDeployAccount28: !Ref Ada28
        AllowedDeployAccount29: !Ref Ada29
        AllowedDeployAccount30: !Ref Ada30
      TimeoutInMinutes: 5
  PnSSCI:
    Type: AWS::CloudFormation::Stack
    Properties:
      TemplateURL: !Sub "https://s3.amazonaws.com/${PnCiCdTemplatesBucketName}/ci/builders/mvn-docker-codebuild.yaml"
      Parameters:
        GitHubProjectName: "pn-ss"
        GitHubDefaultBranch: "develop"
        DisableIntegrationTest: "false"
        CodeArtifactDomainName: !Ref "CodeArtifactDomainName"
        CodeArtifactRepositoryName: !Ref "CodeArtifactRepositoryName"
        NotificationSNSTopic: !Ref "NotificationSNSTopic"
        CiArtifactBucket: !Ref "CiArtifactBucket"
        AllowedDeployAccount1: !Ref Ada1
        AllowedDeployAccount2: !Ref Ada2
        AllowedDeployAccount3: !Ref Ada3
        AllowedDeployAccount4: !Ref Ada4
        AllowedDeployAccount5: !Ref Ada5
        AllowedDeployAccount6: !Ref Ada6
        AllowedDeployAccount7: !Ref Ada7
        AllowedDeployAccount8: !Ref Ada8
        AllowedDeployAccount9: !Ref Ada9
        AllowedDeployAccount10: !Ref Ada10
        AllowedDeployAccount11: !Ref Ada11
        AllowedDeployAccount12: !Ref Ada12
        AllowedDeployAccount13: !Ref Ada13
        AllowedDeployAccount14: !Ref Ada14
        AllowedDeployAccount15: !Ref Ada15
        AllowedDeployAccount16: !Ref Ada16
        AllowedDeployAccount17: !Ref Ada17
        AllowedDeployAccount18: !Ref Ada18
        AllowedDeployAccount19: !Ref Ada19
        AllowedDeployAccount20: !Ref Ada20
        AllowedDeployAccount21: !Ref Ada21
        AllowedDeployAccount22: !Ref Ada22
        AllowedDeployAccount23: !Ref Ada23
        AllowedDeployAccount24: !Ref Ada24
        AllowedDeployAccount25: !Ref Ada25
        AllowedDeployAccount26: !Ref Ada26
        AllowedDeployAccount27: !Ref Ada27
        AllowedDeployAccount28: !Ref Ada28
        AllowedDeployAccount29: !Ref Ada29
        AllowedDeployAccount30: !Ref Ada30
      TimeoutInMinutes: 5
  PnStateMachineManagerCI:
    Type: AWS::CloudFormation::Stack
    Properties:
      TemplateURL: !Sub "https://s3.amazonaws.com/${PnCiCdTemplatesBucketName}/ci/builders/mvn-docker-codebuild.yaml"
      Parameters:
        GitHubProjectName: "pn-statemachinemanager"
        GitHubDefaultBranch: "develop"
        DisableIntegrationTest: "false"
        CodeArtifactDomainName: !Ref "CodeArtifactDomainName"
        CodeArtifactRepositoryName: !Ref "CodeArtifactRepositoryName"
        NotificationSNSTopic: !Ref "NotificationSNSTopic"
        CiArtifactBucket: !Ref "CiArtifactBucket"
        AllowedDeployAccount1: !Ref Ada1
        AllowedDeployAccount2: !Ref Ada2
        AllowedDeployAccount3: !Ref Ada3
        AllowedDeployAccount4: !Ref Ada4
        AllowedDeployAccount5: !Ref Ada5
        AllowedDeployAccount6: !Ref Ada6
        AllowedDeployAccount7: !Ref Ada7
        AllowedDeployAccount8: !Ref Ada8
        AllowedDeployAccount9: !Ref Ada9
        AllowedDeployAccount10: !Ref Ada10
        AllowedDeployAccount11: !Ref Ada11
        AllowedDeployAccount12: !Ref Ada12
        AllowedDeployAccount13: !Ref Ada13
        AllowedDeployAccount14: !Ref Ada14
        AllowedDeployAccount15: !Ref Ada15
        AllowedDeployAccount16: !Ref Ada16
        AllowedDeployAccount17: !Ref Ada17
        AllowedDeployAccount18: !Ref Ada18
        AllowedDeployAccount19: !Ref Ada19
        AllowedDeployAccount20: !Ref Ada20
        AllowedDeployAccount21: !Ref Ada21
        AllowedDeployAccount22: !Ref Ada22
        AllowedDeployAccount23: !Ref Ada23
        AllowedDeployAccount24: !Ref Ada24
        AllowedDeployAccount25: !Ref Ada25
        AllowedDeployAccount26: !Ref Ada26
        AllowedDeployAccount27: !Ref Ada27
        AllowedDeployAccount28: !Ref Ada28
        AllowedDeployAccount29: !Ref Ada29
        AllowedDeployAccount30: !Ref Ada30
      TimeoutInMinutes: 5
  PnECCI:
    Type: AWS::CloudFormation::Stack
    Properties:
      TemplateURL: !Sub "https://s3.amazonaws.com/${PnCiCdTemplatesBucketName}/ci/builders/mvn-docker-codebuild.yaml"
      Parameters:
        GitHubProjectName: "pn-ec"
        GitHubDefaultBranch: "develop"
        DisableIntegrationTest: "false"
        CodeArtifactDomainName: !Ref "CodeArtifactDomainName"
        CodeArtifactRepositoryName: !Ref "CodeArtifactRepositoryName"
        NotificationSNSTopic: !Ref "NotificationSNSTopic"
        CiArtifactBucket: !Ref "CiArtifactBucket"
        AllowedDeployAccount1: !Ref Ada1
        AllowedDeployAccount2: !Ref Ada2
        AllowedDeployAccount3: !Ref Ada3
        AllowedDeployAccount4: !Ref Ada4
        AllowedDeployAccount5: !Ref Ada5
        AllowedDeployAccount6: !Ref Ada6
        AllowedDeployAccount7: !Ref Ada7
        AllowedDeployAccount8: !Ref Ada8
        AllowedDeployAccount9: !Ref Ada9
        AllowedDeployAccount10: !Ref Ada10
        AllowedDeployAccount11: !Ref Ada11
        AllowedDeployAccount12: !Ref Ada12
        AllowedDeployAccount13: !Ref Ada13
        AllowedDeployAccount14: !Ref Ada14
        AllowedDeployAccount15: !Ref Ada15
        AllowedDeployAccount16: !Ref Ada16
        AllowedDeployAccount17: !Ref Ada17
        AllowedDeployAccount18: !Ref Ada18
        AllowedDeployAccount19: !Ref Ada19
        AllowedDeployAccount20: !Ref Ada20
        AllowedDeployAccount21: !Ref Ada21
        AllowedDeployAccount22: !Ref Ada22
        AllowedDeployAccount23: !Ref Ada23
        AllowedDeployAccount24: !Ref Ada24
        AllowedDeployAccount25: !Ref Ada25
        AllowedDeployAccount26: !Ref Ada26
        AllowedDeployAccount27: !Ref Ada27
        AllowedDeployAccount28: !Ref Ada28
        AllowedDeployAccount29: !Ref Ada29
        AllowedDeployAccount30: !Ref Ada30
      TimeoutInMinutes: 5
  PnPlatformUsageEstimatesCI:
    Type: AWS::CloudFormation::Stack
    Properties:
      TemplateURL: !Sub "https://s3.amazonaws.com/${PnCiCdTemplatesBucketName}/ci/builders/mvn-docker-codebuild.yaml"
      Parameters:
        GitHubProjectName: "pn-platform-usage-estimates"
        GitHubDefaultBranch: "develop"
        DisableIntegrationTest: "false"
        CodeArtifactDomainName: !Ref "CodeArtifactDomainName"
        CodeArtifactRepositoryName: !Ref "CodeArtifactRepositoryName"
        NotificationSNSTopic: !Ref "NotificationSNSTopic"
        CiArtifactBucket: !Ref "CiArtifactBucket"
        AllowedDeployAccount1: !Ref Ada1
        AllowedDeployAccount2: !Ref Ada2
        AllowedDeployAccount3: !Ref Ada3
        AllowedDeployAccount4: !Ref Ada4
        AllowedDeployAccount5: !Ref Ada5
        AllowedDeployAccount6: !Ref Ada6
        AllowedDeployAccount7: !Ref Ada7
        AllowedDeployAccount8: !Ref Ada8
        AllowedDeployAccount9: !Ref Ada9
        AllowedDeployAccount10: !Ref Ada10
        AllowedDeployAccount11: !Ref Ada11
        AllowedDeployAccount12: !Ref Ada12
        AllowedDeployAccount13: !Ref Ada13
        AllowedDeployAccount14: !Ref Ada14
        AllowedDeployAccount15: !Ref Ada15
        AllowedDeployAccount16: !Ref Ada16
        AllowedDeployAccount17: !Ref Ada17
        AllowedDeployAccount18: !Ref Ada18
        AllowedDeployAccount19: !Ref Ada19
        AllowedDeployAccount20: !Ref Ada20
        AllowedDeployAccount21: !Ref Ada21
        AllowedDeployAccount22: !Ref Ada22
        AllowedDeployAccount23: !Ref Ada23
        AllowedDeployAccount24: !Ref Ada24
        AllowedDeployAccount25: !Ref Ada25
        AllowedDeployAccount26: !Ref Ada26
        AllowedDeployAccount27: !Ref Ada27
        AllowedDeployAccount28: !Ref Ada28
        AllowedDeployAccount29: !Ref Ada29
        AllowedDeployAccount30: !Ref Ada30
      TimeoutInMinutes: 5

  PnKafkaBridgeCI:
    Type: AWS::CloudFormation::Stack
    Properties:
      TemplateURL: !Sub "https://s3.amazonaws.com/${PnCiCdTemplatesBucketName}/ci/builders/mvn-docker-codebuild.yaml"
      Parameters:
        GitHubProjectName: "pn-kafka-bridge"
        DisableIntegrationTest: "false"
        GitHubDefaultBranch: "develop"
        CodeArtifactDomainName: !Ref "CodeArtifactDomainName"
        CodeArtifactRepositoryName: !Ref "CodeArtifactRepositoryName"
        NotificationSNSTopic: !Ref "NotificationSNSTopic"
        CiArtifactBucket: !Ref "CiArtifactBucket"
        AllowedDeployAccount1: !Ref Ada1
        AllowedDeployAccount2: !Ref Ada2
        AllowedDeployAccount3: !Ref Ada3
        AllowedDeployAccount4: !Ref Ada4
        AllowedDeployAccount5: !Ref Ada5
        AllowedDeployAccount6: !Ref Ada6
        AllowedDeployAccount7: !Ref Ada7
        AllowedDeployAccount8: !Ref Ada8
        AllowedDeployAccount9: !Ref Ada9
        AllowedDeployAccount10: !Ref Ada10
        AllowedDeployAccount11: !Ref Ada11
        AllowedDeployAccount12: !Ref Ada12
        AllowedDeployAccount13: !Ref Ada13
        AllowedDeployAccount14: !Ref Ada14
        AllowedDeployAccount15: !Ref Ada15
        AllowedDeployAccount16: !Ref Ada16
        AllowedDeployAccount17: !Ref Ada17
        AllowedDeployAccount18: !Ref Ada18
        AllowedDeployAccount19: !Ref Ada19
        AllowedDeployAccount20: !Ref Ada20
        AllowedDeployAccount21: !Ref Ada21
        AllowedDeployAccount22: !Ref Ada22
        AllowedDeployAccount23: !Ref Ada23
        AllowedDeployAccount24: !Ref Ada24
        AllowedDeployAccount25: !Ref Ada25
        AllowedDeployAccount26: !Ref Ada26
        AllowedDeployAccount27: !Ref Ada27
        AllowedDeployAccount28: !Ref Ada28
        AllowedDeployAccount29: !Ref Ada29
        AllowedDeployAccount30: !Ref Ada30
      TimeoutInMinutes: 20

  PnRaddBffCI:
    Type: AWS::CloudFormation::Stack
    Properties:
      TemplateURL: !Sub "https://s3.amazonaws.com/${PnCiCdTemplatesBucketName}/ci/builders/mvn-docker-codebuild.yaml"
      Parameters:
        GitHubProjectName: "pn-radd-bff"
        DisableIntegrationTest: "false"
        GitHubDefaultBranch: "develop"
        CodeArtifactDomainName: !Ref "CodeArtifactDomainName"
        CodeArtifactRepositoryName: !Ref "CodeArtifactRepositoryName"
        NotificationSNSTopic: !Ref "NotificationSNSTopic"
        CiArtifactBucket: !Ref "CiArtifactBucket"
        AllowedDeployAccount1: !Ref Ada1
        AllowedDeployAccount2: !Ref Ada2
        AllowedDeployAccount3: !Ref Ada3
        AllowedDeployAccount4: !Ref Ada4
        AllowedDeployAccount5: !Ref Ada5
        AllowedDeployAccount6: !Ref Ada6
        AllowedDeployAccount7: !Ref Ada7
        AllowedDeployAccount8: !Ref Ada8
        AllowedDeployAccount9: !Ref Ada9
        AllowedDeployAccount10: !Ref Ada10
        AllowedDeployAccount11: !Ref Ada11
        AllowedDeployAccount12: !Ref Ada12
        AllowedDeployAccount13: !Ref Ada13
        AllowedDeployAccount14: !Ref Ada14
        AllowedDeployAccount15: !Ref Ada15
        AllowedDeployAccount16: !Ref Ada16
        AllowedDeployAccount17: !Ref Ada17
        AllowedDeployAccount18: !Ref Ada18
        AllowedDeployAccount19: !Ref Ada19
        AllowedDeployAccount20: !Ref Ada20
        AllowedDeployAccount21: !Ref Ada21
        AllowedDeployAccount22: !Ref Ada22
        AllowedDeployAccount23: !Ref Ada23
        AllowedDeployAccount24: !Ref Ada24
        AllowedDeployAccount25: !Ref Ada25
        AllowedDeployAccount26: !Ref Ada26
        AllowedDeployAccount27: !Ref Ada27
        AllowedDeployAccount28: !Ref Ada28
        AllowedDeployAccount29: !Ref Ada29
        AllowedDeployAccount30: !Ref Ada30
      TimeoutInMinutes: 20

  PnAddressManagerCI:
    Type: AWS::CloudFormation::Stack
    Properties:
      TemplateURL: !Sub "https://s3.amazonaws.com/${PnCiCdTemplatesBucketName}/ci/builders/mvn-docker-codebuild.yaml"
      Parameters:
        GitHubProjectName: "pn-address-manager"
        GitHubDefaultBranch: "develop"
        DisableIntegrationTest: "false"
        CodeArtifactDomainName: !Ref "CodeArtifactDomainName"
        CodeArtifactRepositoryName: !Ref "CodeArtifactRepositoryName"
        NotificationSNSTopic: !Ref "NotificationSNSTopic"
        CiArtifactBucket: !Ref "CiArtifactBucket"
        AllowedDeployAccount1: !Ref Ada1
        AllowedDeployAccount2: !Ref Ada2
        AllowedDeployAccount3: !Ref Ada3
        AllowedDeployAccount4: !Ref Ada4
        AllowedDeployAccount5: !Ref Ada5
        AllowedDeployAccount6: !Ref Ada6
        AllowedDeployAccount7: !Ref Ada7
        AllowedDeployAccount8: !Ref Ada8
        AllowedDeployAccount9: !Ref Ada9
        AllowedDeployAccount10: !Ref Ada10
        AllowedDeployAccount11: !Ref Ada11
        AllowedDeployAccount12: !Ref Ada12
        AllowedDeployAccount13: !Ref Ada13
        AllowedDeployAccount14: !Ref Ada14
        AllowedDeployAccount15: !Ref Ada15
        AllowedDeployAccount16: !Ref Ada16
        AllowedDeployAccount17: !Ref Ada17
        AllowedDeployAccount18: !Ref Ada18
        AllowedDeployAccount19: !Ref Ada19
        AllowedDeployAccount20: !Ref Ada20
        AllowedDeployAccount21: !Ref Ada21
        AllowedDeployAccount22: !Ref Ada22
        AllowedDeployAccount23: !Ref Ada23
        AllowedDeployAccount24: !Ref Ada24
        AllowedDeployAccount25: !Ref Ada25
        AllowedDeployAccount26: !Ref Ada26
        AllowedDeployAccount27: !Ref Ada27
        AllowedDeployAccount28: !Ref Ada28
        AllowedDeployAccount29: !Ref Ada29
        AllowedDeployAccount30: !Ref Ada30
      TimeoutInMinutes: 5

  PnServiceDeskCI:
    Type: AWS::CloudFormation::Stack
    Properties:
      TemplateURL: !Sub "https://s3.amazonaws.com/${PnCiCdTemplatesBucketName}/ci/builders/mvn-docker-codebuild.yaml"
      Parameters:
        GitHubProjectName: "pn-service-desk"
        GitHubDefaultBranch: "develop"
        DisableIntegrationTest: "false"
        CodeArtifactDomainName: !Ref "CodeArtifactDomainName"
        CodeArtifactRepositoryName: !Ref "CodeArtifactRepositoryName"
        NotificationSNSTopic: !Ref "NotificationSNSTopic"
        CiArtifactBucket: !Ref "CiArtifactBucket"
        AllowedDeployAccount1: !Ref Ada1
        AllowedDeployAccount2: !Ref Ada2
        AllowedDeployAccount3: !Ref Ada3
        AllowedDeployAccount4: !Ref Ada4
        AllowedDeployAccount5: !Ref Ada5
        AllowedDeployAccount6: !Ref Ada6
        AllowedDeployAccount7: !Ref Ada7
        AllowedDeployAccount8: !Ref Ada8
        AllowedDeployAccount9: !Ref Ada9
        AllowedDeployAccount10: !Ref Ada10
        AllowedDeployAccount11: !Ref Ada11
        AllowedDeployAccount12: !Ref Ada12
        AllowedDeployAccount13: !Ref Ada13
        AllowedDeployAccount14: !Ref Ada14
        AllowedDeployAccount15: !Ref Ada15
        AllowedDeployAccount16: !Ref Ada16
        AllowedDeployAccount17: !Ref Ada17
        AllowedDeployAccount18: !Ref Ada18
        AllowedDeployAccount19: !Ref Ada19
        AllowedDeployAccount20: !Ref Ada20
        AllowedDeployAccount21: !Ref Ada21
        AllowedDeployAccount22: !Ref Ada22
        AllowedDeployAccount23: !Ref Ada23
        AllowedDeployAccount24: !Ref Ada24
        AllowedDeployAccount25: !Ref Ada25
        AllowedDeployAccount26: !Ref Ada26
        AllowedDeployAccount27: !Ref Ada27
        AllowedDeployAccount28: !Ref Ada28
        AllowedDeployAccount29: !Ref Ada29
        AllowedDeployAccount30: !Ref Ada30
      TimeoutInMinutes: 5

  PnF24CI:
    Type: AWS::CloudFormation::Stack
    Properties:
      TemplateURL: !Sub "https://s3.amazonaws.com/${PnCiCdTemplatesBucketName}/ci/builders/mvn-docker-codebuild.yaml"
      Parameters:
        GitHubProjectName: "pn-f24"
        GitHubDefaultBranch: "develop"
        DisableIntegrationTest: "false"
        CodeArtifactDomainName: !Ref "CodeArtifactDomainName"
        CodeArtifactRepositoryName: !Ref "CodeArtifactRepositoryName"
        NotificationSNSTopic: !Ref "NotificationSNSTopic"
        AllowedDeployAccount1: !Ref Ada1
        AllowedDeployAccount2: !Ref Ada2
        AllowedDeployAccount3: !Ref Ada3
        AllowedDeployAccount4: !Ref Ada4
        AllowedDeployAccount5: !Ref Ada5
        AllowedDeployAccount6: !Ref Ada6
        AllowedDeployAccount7: !Ref Ada7
        AllowedDeployAccount8: !Ref Ada8
        AllowedDeployAccount9: !Ref Ada9
        AllowedDeployAccount10: !Ref Ada10
        AllowedDeployAccount11: !Ref Ada11
        AllowedDeployAccount12: !Ref Ada12
        AllowedDeployAccount13: !Ref Ada13
        AllowedDeployAccount14: !Ref Ada14
        AllowedDeployAccount15: !Ref Ada15
        AllowedDeployAccount16: !Ref Ada16
        AllowedDeployAccount17: !Ref Ada17
        AllowedDeployAccount18: !Ref Ada18
        AllowedDeployAccount19: !Ref Ada19
        AllowedDeployAccount20: !Ref Ada20
        AllowedDeployAccount21: !Ref Ada21
        AllowedDeployAccount22: !Ref Ada22
        AllowedDeployAccount23: !Ref Ada23
        AllowedDeployAccount24: !Ref Ada24
        AllowedDeployAccount25: !Ref Ada25
        AllowedDeployAccount26: !Ref Ada26
        AllowedDeployAccount27: !Ref Ada27
        AllowedDeployAccount28: !Ref Ada28
        AllowedDeployAccount29: !Ref Ada29
        AllowedDeployAccount30: !Ref Ada30
      TimeoutInMinutes: 5

  PnPecMockCI:
    Type: AWS::CloudFormation::Stack
    Properties:
      TemplateURL: !Sub "https://s3.amazonaws.com/${PnCiCdTemplatesBucketName}/ci/builders/mvn-docker-codebuild.yaml"
      Parameters:
        GitHubProjectName: "pn-pecmock"
        GitHubDefaultBranch: "develop"
        DisableIntegrationTest: "false"
        CodeArtifactDomainName: !Ref "CodeArtifactDomainName"
        CodeArtifactRepositoryName: !Ref "CodeArtifactRepositoryName"
        NotificationSNSTopic: !Ref "NotificationSNSTopic"
        AllowedDeployAccount1: !Ref Ada1
        AllowedDeployAccount2: !Ref Ada2
        AllowedDeployAccount3: !Ref Ada3
        AllowedDeployAccount4: !Ref Ada4
        AllowedDeployAccount5: !Ref Ada5
        AllowedDeployAccount6: !Ref Ada6
        AllowedDeployAccount7: !Ref Ada7
        AllowedDeployAccount8: !Ref Ada8
        AllowedDeployAccount9: !Ref Ada9
        AllowedDeployAccount10: !Ref Ada10
        AllowedDeployAccount11: !Ref Ada11
        AllowedDeployAccount12: !Ref Ada12
        AllowedDeployAccount13: !Ref Ada13
        AllowedDeployAccount14: !Ref Ada14
        AllowedDeployAccount15: !Ref Ada15
        AllowedDeployAccount16: !Ref Ada16
        AllowedDeployAccount17: !Ref Ada17
        AllowedDeployAccount18: !Ref Ada18
        AllowedDeployAccount19: !Ref Ada19
        AllowedDeployAccount20: !Ref Ada20
        AllowedDeployAccount21: !Ref Ada21
        AllowedDeployAccount22: !Ref Ada22
        AllowedDeployAccount23: !Ref Ada23
        AllowedDeployAccount24: !Ref Ada24
        AllowedDeployAccount25: !Ref Ada25
        AllowedDeployAccount26: !Ref Ada26
        AllowedDeployAccount27: !Ref Ada27
        AllowedDeployAccount28: !Ref Ada28
        AllowedDeployAccount29: !Ref Ada29
        AllowedDeployAccount30: !Ref Ada30
      TimeoutInMinutes: 5

  # Progetti Progression Sensor
  PnProgressionSensorLambdas:
    Type: AWS::CloudFormation::Stack
    Properties:
      TemplateURL: !Sub "https://s3.amazonaws.com/${PnCiCdTemplatesBucketName}/ci/builders/nodejs-multilambda-codebuild.yaml"
      Parameters:
        GitHubProjectName: "pn-progression-sensor"
        BaseDir: "functions"
        BaseDirEscaped: "functions"
        GitHubDefaultBranch: "develop"
        CiArtifactBucket: !Ref "CiArtifactBucket"
        NotificationSNSTopic: !Ref "NotificationSNSTopic"
      TimeoutInMinutes: 5

  # Progetti Progression Sensor
  PnCnLambdas:
    Type: AWS::CloudFormation::Stack
    Properties:
      TemplateURL: !Sub "https://s3.amazonaws.com/${PnCiCdTemplatesBucketName}/ci/builders/nodejs-multilambda-codebuild.yaml"
      Parameters:
        GitHubProjectName: "pn-cn"
        BaseDir: "functions"
        BaseDirEscaped: "functions"
        GitHubDefaultBranch: "develop"
        CiArtifactBucket: !Ref "CiArtifactBucket"
        NotificationSNSTopic: !Ref "NotificationSNSTopic"
        NodeVersion: "18"
      TimeoutInMinutes: 5

  # Progetto Auth Fleet con Multilambda
  PnAuthFleetLambdas:
    Type: AWS::CloudFormation::Stack
    Properties:
      TemplateURL: !Sub "https://s3.amazonaws.com/${PnCiCdTemplatesBucketName}/ci/builders/nodejs-multilambda-codebuild.yaml"
      Parameters:
        GitHubProjectName: "pn-auth-fleet"
        BaseDir: "functions"
        GitHubDefaultBranch: "develop"
        BaseDirEscaped: "functions"
        CiArtifactBucket: !Ref "CiArtifactBucket"
        NotificationSNSTopic: !Ref "NotificationSNSTopic"
      TimeoutInMinutes: 10

  # Progetti WebApp
  PnPaWebapp:
    Type: AWS::CloudFormation::Stack
    Properties:
      TemplateURL: !Sub "https://s3.amazonaws.com/${PnCiCdTemplatesBucketName}/ci/builders/webapp-standard-codebuild.yaml"
      Parameters:
        GitHubProjectName: "pn-frontend"
        PackageName: "pn-pa-webapp"
        BaseDir: "packages/pn-pa-webapp"
        CodeArtifactDomainName: !Ref "CodeArtifactDomainName"
        CodeArtifactRepositoryName: !Ref "CodeArtifactRepositoryName"
        CiArtifactBucket: !Ref "CiArtifactBucket"
        NotificationSNSTopic: !Ref "NotificationSNSTopic"
      TimeoutInMinutes: 5
  PnPfWebapp:
    Type: AWS::CloudFormation::Stack
    Properties:
      TemplateURL: !Sub "https://s3.amazonaws.com/${PnCiCdTemplatesBucketName}/ci/builders/webapp-standard-codebuild.yaml"
      Parameters:
        GitHubProjectName: "pn-frontend"
        PackageName: "pn-personafisica-webapp"
        BaseDir: "packages/pn-personafisica-webapp"
        CodeArtifactDomainName: !Ref "CodeArtifactDomainName"
        CodeArtifactRepositoryName: !Ref "CodeArtifactRepositoryName"
        CiArtifactBucket: !Ref "CiArtifactBucket"
        NotificationSNSTopic: !Ref "NotificationSNSTopic"
      TimeoutInMinutes: 5
  PnPgWebapp:
    Type: AWS::CloudFormation::Stack
    Properties:
      TemplateURL: !Sub "https://s3.amazonaws.com/${PnCiCdTemplatesBucketName}/ci/builders/webapp-standard-codebuild.yaml"
      Parameters:
        GitHubProjectName: "pn-frontend"
        PackageName: "pn-personagiuridica-webapp"
        BaseDir: "packages/pn-personagiuridica-webapp"
        CodeArtifactDomainName: !Ref "CodeArtifactDomainName"
        CodeArtifactRepositoryName: !Ref "CodeArtifactRepositoryName"
        CiArtifactBucket: !Ref "CiArtifactBucket"
        NotificationSNSTopic: !Ref "NotificationSNSTopic"
      TimeoutInMinutes: 5
  PnLoginWebapp:
    Type: AWS::CloudFormation::Stack
    Properties:
      TemplateURL: !Sub "https://s3.amazonaws.com/${PnCiCdTemplatesBucketName}/ci/builders/webapp-standard-codebuild.yaml"
      Parameters:
        GitHubProjectName: "pn-frontend"
        PackageName: "pn-personafisica-login"
        BaseDir: "packages/pn-personafisica-login"
        CodeArtifactDomainName: !Ref "CodeArtifactDomainName"
        CodeArtifactRepositoryName: !Ref "CodeArtifactRepositoryName"
        CiArtifactBucket: !Ref "CiArtifactBucket"
        NotificationSNSTopic: !Ref "NotificationSNSTopic"
      TimeoutInMinutes: 5
  PnShowcaseSite:
    Type: AWS::CloudFormation::Stack
    Properties:
      TemplateURL: !Sub "https://s3.amazonaws.com/${PnCiCdTemplatesBucketName}/ci/builders/webapp-standard-codebuild.yaml"
      Parameters:
        GitHubProjectName: "pn-showcase-site"
        PackageName: "pn-showcase-site"
        BaseDir: "pn-showcase-site"
        CodeArtifactDomainName: !Ref "CodeArtifactDomainName"
        CodeArtifactRepositoryName: !Ref "CodeArtifactRepositoryName"
        CiArtifactBucket: !Ref "CiArtifactBucket"
        NotificationSNSTopic: !Ref "NotificationSNSTopic"
      TimeoutInMinutes: 5
  PnHelpdeskWebapp:
    Type: AWS::CloudFormation::Stack
    Properties:
      TemplateURL: !Sub "https://s3.amazonaws.com/${PnCiCdTemplatesBucketName}/ci/builders/webapp-standard-codebuild.yaml"
      Parameters:
        GitHubProjectName: "pn-helpdesk-fe"
        PackageName: "pn-helpdesk-fe"
        BaseDir: "pn-helpdesk-fe"
        CodeArtifactDomainName: !Ref "CodeArtifactDomainName"
        CodeArtifactRepositoryName: !Ref "CodeArtifactRepositoryName"
        CiArtifactBucket: !Ref "CiArtifactBucket"
        NotificationSNSTopic: !Ref "NotificationSNSTopic"
      TimeoutInMinutes: 5
  # Web sonar pipeline
  PnCommonsFeSonar:
    Type: AWS::CloudFormation::Stack
    Properties:
      TemplateURL: !Sub "https://s3.amazonaws.com/${PnCiCdTemplatesBucketName}/ci/builders/webapp-sonar-codebuild.yaml"
      Parameters:
        GitHubProjectName: "pn-frontend"
        PackageName: "pn-commons"
        BaseDir: "packages/pn-commons"
      TimeoutInMinutes: 5
  PnPaSonar:
    Type: AWS::CloudFormation::Stack
    Properties:
      TemplateURL: !Sub "https://s3.amazonaws.com/${PnCiCdTemplatesBucketName}/ci/builders/webapp-sonar-codebuild.yaml"
      Parameters:
        GitHubProjectName: "pn-frontend"
        PackageName: "pn-pa-webapp"
        BaseDir: "packages/pn-pa-webapp"
      TimeoutInMinutes: 5
  PnPersonafisicaSonar:
    Type: AWS::CloudFormation::Stack
    Properties:
      TemplateURL: !Sub "https://s3.amazonaws.com/${PnCiCdTemplatesBucketName}/ci/builders/webapp-sonar-codebuild.yaml"
      Parameters:
        GitHubProjectName: "pn-frontend"
        PackageName: "pn-personafisica-webapp"
        BaseDir: "packages/pn-personafisica-webapp"
      TimeoutInMinutes: 5
  PnPersonagiuridicaSonar:
    Type: AWS::CloudFormation::Stack
    Properties:
      TemplateURL: !Sub "https://s3.amazonaws.com/${PnCiCdTemplatesBucketName}/ci/builders/webapp-sonar-codebuild.yaml"
      Parameters:
        GitHubProjectName: "pn-frontend"
        PackageName: "pn-personagiuridica-webapp"
        BaseDir: "packages/pn-personagiuridica-webapp"
      TimeoutInMinutes: 5
  PnPfLoginSonar:
    Type: AWS::CloudFormation::Stack
    Properties:
      TemplateURL: !Sub "https://s3.amazonaws.com/${PnCiCdTemplatesBucketName}/ci/builders/webapp-sonar-codebuild.yaml"
      Parameters:
        GitHubProjectName: "pn-frontend"
        PackageName: "pn-personafisica-login"
        BaseDir: "packages/pn-personafisica-login"
      TimeoutInMinutes: 5
  PnValidatorSonar:
    Type: AWS::CloudFormation::Stack
    Properties:
      TemplateURL: !Sub "https://s3.amazonaws.com/${PnCiCdTemplatesBucketName}/ci/builders/webapp-sonar-codebuild.yaml"
      Parameters:
        GitHubProjectName: "pn-frontend"
        PackageName: "pn-validator"
        BaseDir: "packages/pn-validator"
      TimeoutInMinutes: 5
  PnHelpdeskSonar:
    Type: AWS::CloudFormation::Stack
    Properties:
      TemplateURL: !Sub "https://s3.amazonaws.com/${PnCiCdTemplatesBucketName}/ci/builders/webapp-sonar-codebuild.yaml"
      Parameters:
        GitHubProjectName: "pn-helpdesk-fe"
        PackageName: "pn-helpdesk-fe"
      TimeoutInMinutes: 5

  # Progetti Infrastrutturali
  PnInfra:
    Type: AWS::CloudFormation::Stack
    Properties:
      TemplateURL: !Sub "https://s3.amazonaws.com/${PnCiCdTemplatesBucketName}/ci/builders/nodejs-multilambda-codebuild.yaml"
      Parameters:
        GitHubProjectName: "pn-infra"
        GitHubDefaultBranch: "develop"
        CiArtifactBucket: !Ref "CiArtifactBucket"
        NotificationSNSTopic: !Ref "NotificationSNSTopic"
        BaseDir: "runtime-infra/lambdas"
        BaseDirEscaped: "runtime-infra-lambdas"
      TimeoutInMinutes: 5
  PnInfraCore:
    Type: AWS::CloudFormation::Stack
    Properties:
      TemplateURL: !Sub "https://s3.amazonaws.com/${PnCiCdTemplatesBucketName}/ci/builders/not-compiled-repo-codebuild.yaml"
      Parameters:
        GitHubProjectName: "pn-infra-core"
        GitHubDefaultBranch: "develop"
        NotificationSNSTopic: !Ref "NotificationSNSTopic"
      TimeoutInMinutes: 5
  PnInfraConfInfo:
    Type: AWS::CloudFormation::Stack
    Properties:
      TemplateURL: !Sub "https://s3.amazonaws.com/${PnCiCdTemplatesBucketName}/ci/builders/not-compiled-repo-codebuild.yaml"
      Parameters:
        GitHubProjectName: "pn-infra-confinfo"
        GitHubDefaultBranch: "develop"
        NotificationSNSTopic: !Ref "NotificationSNSTopic"
      TimeoutInMinutes: 5

  PnCiCd:
    Type: AWS::CloudFormation::Stack
    Properties:
      TemplateURL: !Sub "https://s3.amazonaws.com/${PnCiCdTemplatesBucketName}/ci/builders/not-compiled-repo-codebuild.yaml"
      Parameters:
        GitHubProjectName: "pn-cicd"
        GitHubDefaultBranch: "main"
        NotificationSNSTopic: !Ref "NotificationSNSTopic"
      TimeoutInMinutes: 5

Outputs:
  CiArtifactBucket:
    Value: !Ref "CiArtifactBucket"
